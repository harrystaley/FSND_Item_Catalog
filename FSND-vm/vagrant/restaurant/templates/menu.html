{% extends "base.html" %}

  {% block title %}
    {{restaurant.name}} Menu
  {% endblock title %}

  {% block content %}
    <h1 class="header">{{restaurant.name}} Menu</h1>

    {% with messages = get_flashed_messages() %}
      {% if messages %}

        <ul class="flash">
        {% for message in messages %}
          <li>
            <strong class="flash">{{message}}</strong>
          </li>
        {% endfor %}
        </ul>

      {% endif %}
    {% endwith %}
    {% if restaurant.user_id == user_id %}
      <a href="{{url_for('new_menu_item', restaurant_id=restaurant.id)}}">New Menu Item</a>
      <br>
    {% endif %}

    {% if items %}
      {% for item in items if item.course == 'Appetizer' %}
        {% if loop.first %}
          <h3>Appetizers</h3>
        {% endif %}

        <div class="name">{{item.name}}</div>
        <br>
        <div class="description">{{item.description}}</div>
        <div class="price">{{item.price}}</div>
        {% if restaurant.user_id == user_id %}
          <a href="{{url_for('edit_menu_item', restaurant_id=restaurant.id, menu_id=item.id)}}">Edit</a>
          <a href="{{url_for('delete_menu_item', restaurant_id=restaurant.id, menu_id=item.id)}}">Delete</a>
        {% endif %}
      {% endfor %}

      {% for item in items if item.course == 'Entree' %}
        {% if loop.first %}
          <h3>Entrees</h3>
        {% endif %}

        <div class="name">{{item.name}}</div>
        <div class="description">{{item.description}}</div>
        <div class="price">{{item.price}}</div>
        {% if restaurant.user_id == user_id %}
          <a href="{{url_for('edit_menu_item', restaurant_id=restaurant.id, menu_id=item.id)}}">Edit</a>
          <a href="{{url_for('delete_menu_item', restaurant_id=restaurant.id, menu_id=item.id)}}">Delete</a>
        {% endif %}
      {% endfor %}

      {% for item in items if item.course == 'Dessert' %}
        {% if loop.first %}
          <h3>Desserts</h3>
        {% endif %}
        <div class="name">{{item.name}}</div>
        <br>
        <div class="description">{{item.description}}</div>
        <div class="price">{{item.price}}</div>
        {% if restaurant.user_id == user_id %}
          <a href="{{url_for('edit_menu_item', restaurant_id=restaurant.id, menu_id=item.id)}}">Edit</a>
          <a href="{{url_for('delete_menu_item', restaurant_id=restaurant.id, menu_id=item.id)}}">Delete</a>
        {% endif %}
      {% endfor %}

    {% else %}
      There are no menu items why not create one!
    {% endif %}
  {% endblock content %}
